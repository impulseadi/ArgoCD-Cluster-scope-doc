How to set up alerts to slack from Grafana

1. Go to Slack API Site
ğŸ‘‰ Open this link in your browser:
https://api.slack.com/apps


2. Create a New App
ï‚·Click "Create New App"
ï‚·Choose "From scratch"
ï‚·App name: Grafana Alerts (or anything you like)
ï‚·Workspace: Choose your current workspace (ClahanTechnologies)
ï‚·Click Create App



3. Enable Incoming Webhooks
ï‚·In the left menu, click "Incoming Webhooks"
ï‚·Toggle ON Activate Incoming Webhooks


4. Add a Webhook URL
ï‚·Scroll down to Webhook URLs for Your Workspace
ï‚·Click "Add New Webhook to Workspace"

ï‚·Choose the #general channel (or #devops-team-training)
ï‚·Click Allow





5. Copy the Webhook URL
ï‚·You'll now see something like:
https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX
ï‚·Copy this URL â€” this is what youâ€™ll paste into Grafana.


âœ… Step: Add This Webhook to Grafana
1.Open Grafana
2.Go to Alerting â†’ Contact points
3.Click "New contact point"

4.Type: Slack
5.Paste the Webhook URL
6.Name: Slack Alerts
7.Save







Now all alerts can be routed to this Slack channel ğŸ¯


ğŸ”” Final Step After Saving:
ï‚·Go to Alerting > Notification policies
ï‚·Click to Add a new policy or edit an existing one
ï‚·Set your new Slack contact point under "Send to"
ï‚·Define matching conditions or leave as default to send all alerts







How to set up Alerts in Grafana

ğŸ§  Prerequisites
ï‚·âœ” Grafana is running.
ï‚·âœ” Prometheus is your data source and collecting metrics from your cluster.
ï‚·âœ” Slack Webhook is connected in Grafana â†’ Alerting â†’ Contact Points.
ï‚·âœ” Youâ€™re using Grafana v8+, which supports Unified Alerting.

ğŸ”” Alert #1: High CPU Usage
ğŸ“ Create Alert Rule
1.Go to Grafana â†’ Alerting â†’ Alert Rules
2.Click â• New alert rule

3.Name: High CPU Usage
4.Data source: Prometheus
5.Query: (to add query switch to code mode from build mode)


ï‚·Now add below query 
100 - (avg by(instance)(rate(node_cpu_seconds_total{mode="idle"}[1m])) * 100)

6.Set Condition:
WHEN last() OF A IS ABOVE 90
FOR 5m




ï‚·Next need to add folder ğŸ‘‡





ï‚·Next need to Create or Choose an Evaluation Group




ï‚·Next step do as below pic ğŸ‘‡


ï‚·Finally alert rule has been created ğŸ‘‡









ï‚·Final step sav rule and exit


